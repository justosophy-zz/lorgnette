{"version":3,"sources":["data/index.js","tooling/debounce.js","components/SearchInput/index.js","App.js","index.js"],"names":["debouncedSearch","func","wait","immediate","arguments","length","undefined","timeout","_len","args","Array","_key","callNow","clearTimeout","setTimeout","apply","debounce","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","searchTerm","updateSearchResults","search","obj","q","_args","wrap","_context","prev","next","trim","abrupt","format","tags","querystring","jsonp","url","name","err","data","items","stop","this","SearchInput","value","onChange","_ref$badState","badState","input","useRef","_useState","useState","_useState2","slicedToArray","initialLoad","updateInitialLoad","useEffect","HTMLInputElement","focus","react_default","createElement","className","type","id","classnames","search-input--bad-state","aria-label","ref","el","placeholder","maxLength","App","updateSearchTerm","_useState3","_useState4","searchResults","_useState5","_useState6","emptyResults","updateEmptyResults","header","console","log","App-header-results","xmlns","viewBox","fill","d","cx","cy","r","strokeWidth","components_SearchInput","event","currentTarget","map","result","key","media","m","href","link","target","rel","title","concat","src","alt","author_id","author","match","formatDate","parseDate","date_taken","split","tag","onClick","HTMLElement","scrollIntoView","domRoot","document","getElementById","ReactDOM","render","src_App"],"mappings":"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","file":"static/js/main.16fe98f7.chunk.js","sourcesContent":["import * as querystring from \"querystring\";\nimport jsonp from \"jsonp\";\n\nimport debounce from \"../tooling/debounce\";\n\nconst doSearch = async (\n  searchTerm: string = \"\",\n  updateSearchResults: Function\n) => {\n  const search = searchTerm.trim();\n  if (search.length === 0) {\n    return;\n  }\n\n  // console.log({ search });\n  const url = \"https://www.flickr.com/services/feeds/photos_public.gne\";\n\n  const obj = {\n    format: \"json\",\n    tags: search\n  };\n  const q = querystring.encode(obj);\n\n  jsonp(url + \"?\" + q, { name: \"jsonFlickrFeed\" }, function(err, data) {\n    if (err) {\n      // console.log({ err })\n      updateSearchResults([]);\n      return;\n    }\n    //   console.log({ data })\n    updateSearchResults(data.items);\n  });\n};\n\nconst debouncedSearch = debounce(doSearch, 250);\n\nexport { debouncedSearch };\n","// @flow\n\nexport default (func: Function, wait: number, immediate : boolean = false) => {\n    let timeout = null\n  \n    return (...args: any[]) => {      \n\n      const later = () => {\n        timeout = null\n        if (!immediate) {\n          func(...args)\n        }\n      };\n  \n      const callNow = immediate && !timeout\n      \n      clearTimeout(timeout)\n  \n      timeout = setTimeout(later, wait)\n      \n      if (callNow) {\n        func(...args)\n      }\n    }\n  }","import React, { useRef, useEffect, useState } from \"react\";\nimport classnames from \"classnames\";\nimport \"./style.css\";\n\ntype SearchInputProps = {|\n  value: string,\n  onChange: Function,\n  badState?: boolean\n|};\n\ntype InputRef = {| current: null |} | HTMLInputElement | null;\n\nconst SearchInput = ({\n  value,\n  onChange,\n  badState = false\n}: SearchInputProps) => {\n  let input: InputRef = useRef(null);\n\n  const [initialLoad, updateInitialLoad] = useState(true);\n\n  useEffect(() => {\n    if (input instanceof HTMLInputElement && initialLoad) {\n      input.focus();\n      updateInitialLoad(false);\n    }\n  }, [initialLoad]);\n\n  return (\n    <div className=\"search-input-container\">\n      <input\n        type=\"search\"\n        id=\"search-input\"\n        className={classnames(\"search-input\", {\n          \"search-input--bad-state\": !!badState\n        })}\n        name=\"q\"\n        aria-label=\"Search flickr\"\n        ref={el => (input = el)}\n        placeholder=\"Search flickr\"\n        maxLength={50}\n        value={value}\n        onChange={onChange}\n      />\n    </div>\n  );\n};\n\nexport default SearchInput;\n","// @flow\n\nimport React, { useEffect, useState, useRef } from \"react\";\n\nimport classnames from \"classnames\";\n\nimport { parse as parseDate, format as formatDate } from \"date-fns\";\n\nimport \"./App.css\";\n\nimport { debouncedSearch } from \"./data\";\n\nimport SearchInput from \"./components/SearchInput\";\n\ntype HeaderRef = {| current: null |} | HTMLElement | null;\n\nfunction App() {\n  const [searchTerm, updateSearchTerm] = useState(\"\");\n  const [searchResults, updateSearchResults] = useState([]);\n  const [emptyResults, updateEmptyResults] = useState(false);\n\n  let header = useRef(null);\n\n  useEffect(() => {\n    debouncedSearch(searchTerm, updateSearchResults);\n  }, [searchTerm]);\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    if (searchTerm.trim().length !== 0 && searchResults.length === 0) {\n      console.log(\"bad result\", { searchResults });\n      updateEmptyResults(true);\n    } else {\n      updateEmptyResults(false);\n    }\n  }, [searchResults]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n\n  return (\n    <div className=\"App\">\n      <header\n        className={classnames(\"App-header\", {\n          \"App-header-results\": searchResults.length > 0\n        })}\n        ref={el => (header = el)}\n      >\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 32 32\"\n          className=\"App-logo\"\n        >\n          <path\n            fill=\"hsla(220, 13%, 5%, 0.9)\"\n            d=\"M11 5C9.032 5 7.46 6.44 7.125 8.313c-1.89.476-3.53 1.705-4.25 3.656h-.03L.718 17.936C.265 18.863 0 19.904 0 21c0 3.854 3.146 7 7 7 3.472 0 6.365-2.552 6.906-5.875.543.535 1.28.875 2.094.875.814 0 1.55-.34 2.094-.875C18.634 25.448 21.528 28 25 28c3.854 0 7-3.146 7-7 0-.974-.2-1.906-.563-2.75l-2.28-6.375-.032-.03v-.033c-.73-1.77-2.348-3.012-4.25-3.5C24.54 6.442 22.968 5 21 5c-1.857 0-3.362 1.285-3.813 3h-2.375c-.45-1.715-1.955-3-3.812-3zm0 2c1.19 0 2 .81 2 2v1h6V9c0-1.19.81-2 2-2s2 .81 2 2v.906l.906.094c1.486.156 2.766 1.192 3.344 2.53.01.022.022.042.03.064l.75 2.125c-.918-.446-1.944-.72-3.03-.72-2.924 0-5.425 1.817-6.47 4.375C17.996 17.545 17.054 17 16 17c-1.053 0-1.995.544-2.53 1.375C12.424 15.817 9.923 14 7 14c-1.072 0-2.09.253-3 .688l.75-2.032v-.03c.58-1.55 1.808-2.464 3.344-2.626L9 9.906V9c0-1.19.81-2 2-2zm-4 9c2.773 0 5 2.227 5 5s-2.227 5-5 5-5-2.227-5-5c0-.708.175-1.36.438-1.97.016-.037.013-.086.03-.124C3.26 17.192 4.98 16 7 16zm18 0c2.773 0 5 2.227 5 5s-2.227 5-5 5-5-2.227-5-5 2.227-5 5-5zm-9 3c.564 0 1 .436 1 1 0 .564-.436 1-1 1-.564 0-1-.436-1-1 0-.564.436-1 1-1z\"\n          />\n          <circle cx=\"7\" cy=\"21\" r=\"3\" strokeWidth=\"0\" fill=\"#0063DC\" />\n          <circle cx=\"25\" cy=\"21\" r=\"3\" strokeWidth=\"0\" fill=\"#FF0084\" />\n        </svg>\n        <SearchInput\n          value={searchTerm}\n          onChange={(event: SyntheticInputEvent<HTMLInputElement>) => {\n            if (event.currentTarget instanceof HTMLInputElement) {\n              updateSearchTerm(event.currentTarget.value);\n            }\n          }}\n          badState={emptyResults}\n        />\n      </header>\n      <main className=\"search-results\">\n        <ul>\n          {searchResults.map(result => (\n            <li key={result.media.m}>\n              <ul className=\"result-details\">\n                <li>\n                  <div>image</div>\n                  <div>\n                    <a\n                      href={result.link}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      title={`View image \"${result.title}\"`}\n                    >\n                      <img src={result.media.m} alt={result.title} />\n                    </a>\n                  </div>\n                </li>\n                <li>\n                  <div>author</div>\n                  <div>\n                    <a\n                      href={`https://www.flickr.com/photos/${\n                        result.author_id\n                      }/`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      {result.author.match(/\"([^\"]+)\"/)[1]}\n                    </a>\n                  </div>\n                </li>\n                <li>\n                  <div>date_taken</div>\n                  <div>\n                    {formatDate(parseDate(result.date_taken), \"MMMM D YYYY\")}\n                  </div>\n                </li>\n                <li>\n                  <div>tags</div>\n                  <div>\n                    {result.tags.split(\" \").map(tag => (\n                      <button\n                        type=\"button\"\n                        title={`Search for \"${tag}\"`}\n                        onClick={() => {\n                          if (header instanceof HTMLElement) {\n                            header.scrollIntoView();\n                          }\n                          updateSearchTerm(tag);\n                        }}\n                        key={tag}\n                      >\n                        {tag}\n                      </button>\n                    ))}\n                  </div>\n                </li>\n                <li>\n                  <div>link</div>\n                  <div>\n                    <a\n                      href={result.link}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      {result.link}\n                    </a>\n                  </div>\n                </li>\n              </ul>\n            </li>\n          ))}\n        </ul>\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n","// @flow\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nconst domRoot = document.getElementById('root')\n\nif (domRoot !== null) {\n    ReactDOM.render(<App />, domRoot);\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}