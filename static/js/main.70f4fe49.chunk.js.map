{"version":3,"sources":["data/index.js","tooling/debounce.js","components/Logo/index.js","components/SearchInput/index.js","App.js","index.js"],"names":["debouncedSearch","func","wait","immediate","arguments","length","undefined","timeout","_len","args","Array","_key","callNow","clearTimeout","setTimeout","apply","debounce","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","searchTerm","updateSearchResults","search","obj","q","_args","wrap","_context","prev","next","trim","abrupt","format","tags","querystring","jsonp","url","name","err","data","items","e","console","log","stop","this","Logo","react_default","createElement","className","xmlns","viewBox","fill","d","cx","cy","r","strokeWidth","SearchInput","value","onChange","_ref$badState","badState","input","useRef","_useState","useState","_useState2","slicedToArray","initialLoad","updateInitialLoad","useEffect","HTMLInputElement","focus","type","id","classnames","search-input--bad-state","aria-label","ref","el","placeholder","maxLength","App","updateSearchTerm","_useState3","_useState4","searchResults","_useState5","_useState6","emptyResults","updateEmptyResults","header","App-header-results","components_SearchInput","event","currentTarget","map","result","key","media","m","href","link","target","rel","title","concat","src","alt","author_id","author","match","formatDate","parseDate","date_taken","split","tag","onClick","HTMLElement","scrollIntoView","domRoot","document","getElementById","ReactDOM","render","src_App"],"mappings":"2SA2CMA,ECzCS,SAACC,EAAgBC,GAA8C,IAAhCC,EAAgCC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GACtEG,EAAU,KAEd,OAAO,WAAoB,QAAAC,EAAAJ,UAAAC,OAAhBI,EAAgB,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAhBF,EAAgBE,GAAAP,UAAAO,GAEzB,IAOMC,EAAUT,IAAcI,EAE9BM,aAAaN,GAEbA,EAAUO,WAXI,WACZP,EAAU,KACLJ,GACHF,EAAIc,WAAJ,EAAQN,IAQgBP,GAExBU,GACFX,EAAIc,WAAJ,EAAQN,IDsBQO,CAtCV,eAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAC,IAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAzB,UAAA,OAAAgB,EAAAC,EAAAS,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACfT,EADeK,EAAAxB,OAAA,QAAAC,IAAAuB,EAAA,GAAAA,EAAA,GACM,GACrBJ,EAFeI,EAAAxB,OAAA,EAAAwB,EAAA,QAAAvB,EAKO,KADhBoB,EAASF,EAAWU,QACf7B,OALI,CAAA0B,EAAAE,KAAA,eAAAF,EAAAI,OAAA,iBAUH,0DAENR,EAAM,CACVS,OAAQ,OACRC,KAAMX,GAEFE,EAAIU,SAAmBX,GAE7B,IACEY,IACEC,2DAAYZ,EACZ,CAAEa,KAAM,kBACR,SAASC,EAAKC,GAGVlB,EAFEiB,EAEkB,GAIFC,EAAKC,QAE3B,CAAErC,QAAS,MAEb,MAAOsC,GACPC,QAAQC,IAAI,QAlCC,wBAAAhB,EAAAiB,SAAAzB,MAAH,yBAAAN,EAAAF,MAAAkC,KAAA7C,YAAA,GAsC6B,KExC5B8C,UAAA,kBACbC,EAAA9B,EAAA+B,cAAA,OAAKC,UAAU,OAAOC,MAAM,6BAA6BC,QAAQ,aAC/DJ,EAAA9B,EAAA+B,cAAA,QACEI,KAAK,2BACLC,EAAE,okCAEJN,EAAA9B,EAAA+B,cAAA,UAAQM,GAAG,IAAIC,GAAG,KAAKC,EAAE,IAAIC,YAAY,IAAIL,KAAK,YAClDL,EAAA9B,EAAA+B,cAAA,UAAQM,GAAG,KAAKC,GAAG,KAAKC,EAAE,IAAIC,YAAY,IAAIL,KAAK,eCsCxCM,UApCK,SAAA7C,GAII,IAHtB8C,EAGsB9C,EAHtB8C,MACAC,EAEsB/C,EAFtB+C,SAEsBC,EAAAhD,EADtBiD,gBACsB,IAAAD,KAClBE,EAAkBC,iBAAO,MADPC,EAGmBC,oBAAS,GAH5BC,EAAArD,OAAAsD,EAAA,EAAAtD,CAAAmD,EAAA,GAGfI,EAHeF,EAAA,GAGFG,EAHEH,EAAA,GAYtB,OAPAI,oBAAU,WACJR,aAAiBS,kBAAoBH,IACvCN,EAAMU,QACNH,GAAkB,KAEnB,CAACD,IAGFtB,EAAA9B,EAAA+B,cAAA,OAAKC,UAAU,0BACbF,EAAA9B,EAAA+B,cAAA,SACE0B,KAAK,SACLC,GAAG,eACH1B,UAAW2B,IAAW,eAAgB,CACpCC,4BAA6Bf,IAE/BzB,KAAK,IACLyC,aAAW,gBACXC,IAAK,SAAAC,GAAE,OAAKjB,EAAQiB,GACpBC,YAAY,gBACZC,UAAW,GACXvB,MAAOA,EACPC,SAAUA,OCgGHuB,MAzHf,WAAe,IAAAlB,EAC0BC,mBAAS,IADnCC,EAAArD,OAAAsD,EAAA,EAAAtD,CAAAmD,EAAA,GACN7C,EADM+C,EAAA,GACMiB,EADNjB,EAAA,GAAAkB,EAEgCnB,mBAAS,IAFzCoB,EAAAxE,OAAAsD,EAAA,EAAAtD,CAAAuE,EAAA,GAENE,EAFMD,EAAA,GAESjE,EAFTiE,EAAA,GAAAE,EAG8BtB,oBAAS,GAHvCuB,EAAA3E,OAAAsD,EAAA,EAAAtD,CAAA0E,EAAA,GAGNE,EAHMD,EAAA,GAGQE,EAHRF,EAAA,GAKTG,EAAoB5B,iBAAO,MAiB/B,OAfAO,oBAAU,WACR3E,EAAgBwB,EAAYC,IAC3B,CAACD,IAGJmD,oBAAU,WACyB,IAA7BnD,EAAWU,OAAO7B,QAAyC,IAAzBsF,EAActF,QAClDyC,QAAQC,IAAI,aAAc,CAAE4C,kBAC5BI,GAAmB,IAEnBA,GAAmB,IAEpB,CAACJ,IAIFxC,EAAA9B,EAAA+B,cAAA,OAAKC,UAAU,OACbF,EAAA9B,EAAA+B,cAAA,UACEC,UAAW2B,IAAW,aAAc,CAClCiB,qBAAsBN,EAActF,OAAS,KAG/C8C,EAAA9B,EAAA+B,cAAA,OAAKC,UAAU,cACbF,EAAA9B,EAAA+B,cAACF,EAAD,MACAC,EAAA9B,EAAA+B,cAAC8C,EAAD,CACEnC,MAAOvC,EACPwC,SAAU,SAACmC,GACLA,EAAMC,yBAAyBxB,kBACjCY,EAAiBW,EAAMC,cAAcrC,QAGzCG,SAAU4B,MAIhB3C,EAAA9B,EAAA+B,cAAA,QAAMC,UAAU,kBACdF,EAAA9B,EAAA+B,cAAA,UACGuC,EAAcU,IAAI,SAAAC,GAAM,OACvBnD,EAAA9B,EAAA+B,cAAA,MAAImD,IAAKD,EAAOE,MAAMC,GACpBtD,EAAA9B,EAAA+B,cAAA,MAAIC,UAAU,kBACZF,EAAA9B,EAAA+B,cAAA,UACED,EAAA9B,EAAA+B,cAAA,oBACAD,EAAA9B,EAAA+B,cAAA,WACED,EAAA9B,EAAA+B,cAAA,KACEsD,KAAMJ,EAAOK,KACbC,OAAO,SACPC,IAAI,sBACJC,MAAK,eAAAC,OAAiBT,EAAOQ,MAAxB,MAEL3D,EAAA9B,EAAA+B,cAAA,OAAK4D,IAAKV,EAAOE,MAAMC,EAAGQ,IAAKX,EAAOQ,WAI5C3D,EAAA9B,EAAA+B,cAAA,UACED,EAAA9B,EAAA+B,cAAA,qBACAD,EAAA9B,EAAA+B,cAAA,WACED,EAAA9B,EAAA+B,cAAA,KACEsD,KAAI,iCAAAK,OACFT,EAAOY,UADL,KAGJN,OAAO,SACPC,IAAI,uBAEHP,EAAOa,OAAOC,MAAM,aAAa,MAIxCjE,EAAA9B,EAAA+B,cAAA,UACED,EAAA9B,EAAA+B,cAAA,yBACAD,EAAA9B,EAAA+B,cAAA,WACGiE,iBAAWC,gBAAUhB,EAAOiB,YAAa,iBAG9CpE,EAAA9B,EAAA+B,cAAA,UACED,EAAA9B,EAAA+B,cAAA,mBACAD,EAAA9B,EAAA+B,cAAA,WACGkD,EAAOjE,KAAKmF,MAAM,KAAKnB,IAAI,SAAAoB,GAAG,OAC7BtE,EAAA9B,EAAA+B,cAAA,UACE0B,KAAK,SACLgC,MAAK,eAAAC,OAAiBU,EAAjB,KACLC,QAAS,WACH1B,aAAkB2B,aACpB3B,EAAO4B,iBAETpC,EAAiBiC,IAEnBlB,IAAKkB,GAEJA,OAKTtE,EAAA9B,EAAA+B,cAAA,UACED,EAAA9B,EAAA+B,cAAA,mBACAD,EAAA9B,EAAA+B,cAAA,WACED,EAAA9B,EAAA+B,cAAA,KACEsD,KAAMJ,EAAOK,KACbC,OAAO,SACPC,IAAI,uBAEHP,EAAOK,gBCrHxBkB,EAAUC,SAASC,eAAe,QAExB,OAAZF,GACAG,IAASC,OAAO9E,EAAA9B,EAAA+B,cAAC8E,EAAD,MAASL","file":"static/js/main.70f4fe49.chunk.js","sourcesContent":["import * as querystring from \"querystring\";\nimport jsonp from \"jsonp\";\n\nimport debounce from \"../tooling/debounce\";\n\nconst doSearch = async (\n  searchTerm: string = \"\",\n  updateSearchResults: Function\n) => {\n  const search = searchTerm.trim();\n  if (search.length === 0) {\n    return;\n  }\n\n  // console.log({ search });\n  const url = \"https://www.flickr.com/services/feeds/photos_public.gne\";\n\n  const obj = {\n    format: \"json\",\n    tags: search\n  };\n  const q = querystring.encode(obj);\n\n  try {\n    jsonp(\n      url + \"?\" + q,\n      { name: \"jsonFlickrFeed\" },\n      function(err, data) {\n        if (err) {\n          // console.log({ err })\n          updateSearchResults([]);\n          return;\n        }\n        //   console.log({ data })\n        updateSearchResults(data.items);\n      },\n      { timeout: 10000 }\n    );\n  } catch (e) {\n    console.log(\"dude\");\n  }\n};\n\nconst debouncedSearch = debounce(doSearch, 250);\n\nexport { debouncedSearch };\n","// @flow\n\nexport default (func: Function, wait: number, immediate : boolean = false) => {\n    let timeout = null\n  \n    return (...args: any[]) => {      \n\n      const later = () => {\n        timeout = null\n        if (!immediate) {\n          func(...args)\n        }\n      };\n  \n      const callNow = immediate && !timeout\n      \n      clearTimeout(timeout)\n  \n      timeout = setTimeout(later, wait)\n      \n      if (callNow) {\n        func(...args)\n      }\n    }\n  }","import React from 'react'\nimport \"./style.css\";\n\nexport default () => (\n  <svg className=\"logo\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\">\n    <path\n      fill=\"hsla(220, 13%, 5%, 0.75)\"\n      d=\"M11 5C9.032 5 7.46 6.44 7.125 8.313c-1.89.476-3.53 1.705-4.25 3.656h-.03L.718 17.936C.265 18.863 0 19.904 0 21c0 3.854 3.146 7 7 7 3.472 0 6.365-2.552 6.906-5.875.543.535 1.28.875 2.094.875.814 0 1.55-.34 2.094-.875C18.634 25.448 21.528 28 25 28c3.854 0 7-3.146 7-7 0-.974-.2-1.906-.563-2.75l-2.28-6.375-.032-.03v-.033c-.73-1.77-2.348-3.012-4.25-3.5C24.54 6.442 22.968 5 21 5c-1.857 0-3.362 1.285-3.813 3h-2.375c-.45-1.715-1.955-3-3.812-3zm0 2c1.19 0 2 .81 2 2v1h6V9c0-1.19.81-2 2-2s2 .81 2 2v.906l.906.094c1.486.156 2.766 1.192 3.344 2.53.01.022.022.042.03.064l.75 2.125c-.918-.446-1.944-.72-3.03-.72-2.924 0-5.425 1.817-6.47 4.375C17.996 17.545 17.054 17 16 17c-1.053 0-1.995.544-2.53 1.375C12.424 15.817 9.923 14 7 14c-1.072 0-2.09.253-3 .688l.75-2.032v-.03c.58-1.55 1.808-2.464 3.344-2.626L9 9.906V9c0-1.19.81-2 2-2zm-4 9c2.773 0 5 2.227 5 5s-2.227 5-5 5-5-2.227-5-5c0-.708.175-1.36.438-1.97.016-.037.013-.086.03-.124C3.26 17.192 4.98 16 7 16zm18 0c2.773 0 5 2.227 5 5s-2.227 5-5 5-5-2.227-5-5 2.227-5 5-5zm-9 3c.564 0 1 .436 1 1 0 .564-.436 1-1 1-.564 0-1-.436-1-1 0-.564.436-1 1-1z\"\n    />\n    <circle cx=\"7\" cy=\"21\" r=\"3\" strokeWidth=\"0\" fill=\"#0063DC\" />\n    <circle cx=\"25\" cy=\"21\" r=\"3\" strokeWidth=\"0\" fill=\"#FF0084\" />\n  </svg>\n);\n","import React, { useRef, useEffect, useState } from \"react\";\nimport classnames from \"classnames\";\nimport \"./style.css\";\n\ntype SearchInputProps = {|\n  value: string,\n  onChange: Function,\n  badState?: boolean\n|};\n\ntype InputRef = {| current: null |} | HTMLInputElement | null;\n\nconst SearchInput = ({\n  value,\n  onChange,\n  badState = false\n}: SearchInputProps) => {\n  let input: InputRef = useRef(null);\n\n  const [initialLoad, updateInitialLoad] = useState(true);\n\n  useEffect(() => {\n    if (input instanceof HTMLInputElement && initialLoad) {\n      input.focus();\n      updateInitialLoad(false);\n    }\n  }, [initialLoad]);\n\n  return (\n    <div className=\"search-input-container\">\n      <input\n        type=\"search\"\n        id=\"search-input\"\n        className={classnames(\"search-input\", {\n          \"search-input--bad-state\": !!badState\n        })}\n        name=\"q\"\n        aria-label=\"Search flickr\"\n        ref={el => (input = el)}\n        placeholder=\"Search flickr\"\n        maxLength={50}\n        value={value}\n        onChange={onChange}\n      />\n    </div>\n  );\n};\n\nexport default SearchInput;\n","// @flow\n\nimport React, { useEffect, useState, useRef } from \"react\";\n\nimport classnames from \"classnames\";\n\nimport { parse as parseDate, format as formatDate } from \"date-fns\";\n\nimport \"./App.css\";\n\nimport { debouncedSearch } from \"./data\";\n\nimport Logo from \"./components/Logo\"\nimport SearchInput from \"./components/SearchInput\";\n\ntype HeaderRef = {| current: null |} | HTMLElement | null;\n\nfunction App() {\n  const [searchTerm, updateSearchTerm] = useState(\"\");\n  const [searchResults, updateSearchResults] = useState([]);\n  const [emptyResults, updateEmptyResults] = useState(false);\n\n  let header: HeaderRef = useRef(null);\n\n  useEffect(() => {\n    debouncedSearch(searchTerm, updateSearchResults);\n  }, [searchTerm]);\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    if (searchTerm.trim().length !== 0 && searchResults.length === 0) {\n      console.log(\"bad result\", { searchResults });\n      updateEmptyResults(true);\n    } else {\n      updateEmptyResults(false);\n    }\n  }, [searchResults]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n\n  return (\n    <div className=\"App\">\n      <header\n        className={classnames(\"App-header\", {\n          \"App-header-results\": searchResults.length > 0\n        })}\n      >\n        <div className=\"App-lockup\">\n          <Logo />\n          <SearchInput\n            value={searchTerm}\n            onChange={(event: SyntheticInputEvent<HTMLInputElement>) => {\n              if (event.currentTarget instanceof HTMLInputElement) {\n                updateSearchTerm(event.currentTarget.value);\n              }\n            }}\n            badState={emptyResults}\n          />\n        </div>\n      </header>\n      <main className=\"search-results\">\n        <ul>\n          {searchResults.map(result => (\n            <li key={result.media.m}>\n              <ul className=\"result-details\">\n                <li>\n                  <div>image</div>\n                  <div>\n                    <a\n                      href={result.link}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      title={`View image \"${result.title}\"`}\n                    >\n                      <img src={result.media.m} alt={result.title} />\n                    </a>\n                  </div>\n                </li>\n                <li>\n                  <div>author</div>\n                  <div>\n                    <a\n                      href={`https://www.flickr.com/photos/${\n                        result.author_id\n                      }/`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      {result.author.match(/\"([^\"]+)\"/)[1]}\n                    </a>\n                  </div>\n                </li>\n                <li>\n                  <div>date_taken</div>\n                  <div>\n                    {formatDate(parseDate(result.date_taken), \"MMMM D YYYY\")}\n                  </div>\n                </li>\n                <li>\n                  <div>tags</div>\n                  <div>\n                    {result.tags.split(\" \").map(tag => (\n                      <button\n                        type=\"button\"\n                        title={`Search for \"${tag}\"`}\n                        onClick={() => {\n                          if (header instanceof HTMLElement) {\n                            header.scrollIntoView();\n                          }\n                          updateSearchTerm(tag);\n                        }}\n                        key={tag}\n                      >\n                        {tag}\n                      </button>\n                    ))}\n                  </div>\n                </li>\n                <li>\n                  <div>link</div>\n                  <div>\n                    <a\n                      href={result.link}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      {result.link}\n                    </a>\n                  </div>\n                </li>\n              </ul>\n            </li>\n          ))}\n        </ul>\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n","// @flow\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nconst domRoot = document.getElementById('root')\n\nif (domRoot !== null) {\n    ReactDOM.render(<App />, domRoot);\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}